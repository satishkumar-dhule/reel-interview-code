# Learning Paths Feature

## Overview

The Learning Paths feature provides dynamically generated, personalized learning roadmaps based on:
- **Company-specific paths**: Tailored to questions asked at specific companies (Google, Amazon, Meta, etc.)
- **Job title paths**: Customized for different roles (Frontend Engineer, Backend Engineer, DevOps, etc.)
- **Skill-based paths**: Generated using RAG analysis to identify knowledge gaps

## Architecture

### Database Schema

```sql
CREATE TABLE learning_paths (
  id TEXT PRIMARY KEY,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  path_type TEXT NOT NULL,           -- 'company', 'job-title', 'skill', 'certification'
  target_company TEXT,                -- e.g., 'Google', 'Amazon'
  target_job_title TEXT,              -- e.g., 'frontend-engineer'
  difficulty TEXT NOT NULL,           -- 'beginner', 'intermediate', 'advanced'
  estimated_hours INTEGER,
  question_ids TEXT NOT NULL,         -- JSON array of question IDs
  channels TEXT NOT NULL,             -- JSON array of channels
  tags TEXT,                          -- JSON array of tags
  prerequisites TEXT,                 -- JSON array of prerequisite path IDs
  learning_objectives TEXT,           -- JSON array of objectives
  milestones TEXT,                    -- JSON array of milestone objects
  popularity INTEGER DEFAULT 0,       -- User engagement metric
  completion_rate INTEGER DEFAULT 0,  -- Success rate
  average_rating INTEGER DEFAULT 0,   -- User ratings
  metadata TEXT,                      -- Additional data
  status TEXT DEFAULT 'active',
  created_at TEXT,
  last_updated TEXT,
  last_generated TEXT                 -- When regenerated by daily job
)
```

### Daily Generation Job

**Script**: `script/generate-learning-paths.js`

Runs daily via GitHub Actions to:
1. Scan all questions in the database
2. Analyze company tags, job title relevance, and RAG embeddings
3. Generate/update learning paths
4. Order questions intelligently (foundational → advanced)
5. Create milestones and learning objectives

**Workflow**: `.github/workflows/generate-learning-paths.yml`
- Runs at 2 AM UTC daily
- Can be triggered manually via workflow_dispatch

## Path Types

### 1. Company-Specific Paths

Generated for each major tech company based on questions tagged with that company.

**Example**: `company-google-intermediate`
- Title: "Google Interview Prep - Intermediate"
- Questions: All questions tagged with "Google" at intermediate level
- Ordered by: Difficulty, then relevance score

### 2. Job Title Paths

Generated using the job title relevance scoring system.

**Example**: `job-title-frontend-engineer-advanced`
- Title: "Frontend Engineer Path - Advanced"
- Questions: High relevance score (≥40) for frontend-engineer role
- Covers: Primary channels (React, JavaScript, CSS) + secondary channels

### 3. Skill-Based Paths

Generated using RAG gap analysis to identify under-covered topics.

**Example**: `skill-system-design-caching`
- Title: "Master Caching in System Design"
- Questions: Semantically related questions about caching
- Purpose: Fill knowledge gaps identified by RAG

## API Endpoints

### Get All Learning Paths
```
GET /api/learning-paths?pathType=company&difficulty=intermediate&search=google
```

Query parameters:
- `pathType`: Filter by type (company, job-title, skill, certification)
- `difficulty`: Filter by difficulty (beginner, intermediate, advanced)
- `company`: Filter by target company
- `jobTitle`: Filter by target job title
- `search`: Search in title, description, tags
- `limit`: Results per page (default: 50)
- `offset`: Pagination offset

### Get Single Path
```
GET /api/learning-paths/:pathId
```

Returns full path details including question IDs, milestones, objectives.

### Get Filter Options
```
GET /api/learning-paths/filters/companies
GET /api/learning-paths/filters/job-titles
```

Returns available filter values for dropdowns.

### Start a Path
```
POST /api/learning-paths/:pathId/start
```

Increments popularity counter when user starts a path.

### Get Stats
```
GET /api/learning-paths/stats
```

Returns aggregate statistics:
- Total paths
- Breakdown by type
- Breakdown by difficulty

## Frontend Components

### LearningPaths Page

**Location**: `client/src/pages/LearningPaths.tsx`

Features:
- Search bar directly below title
- Advanced filters (type, difficulty, company, job title)
- Grid layout with path cards
- Real-time search and filtering
- Empty states and loading states

### Path Card

Displays:
- Path type icon and badge
- Title and description
- Company or job title badge (if applicable)
- Difficulty badge
- Question count and estimated hours
- Popularity indicator
- "Start Learning" button

## Search Functionality

### Learning Paths Search
- Searches in: title, description, tags
- Real-time filtering
- Combined with other filters (type, difficulty, etc.)

### Channels Search
- Already implemented in `AllChannelsRedesigned.tsx`
- Search bar directly below title
- Searches in: channel name, description
- Works with category filters

## RAG Integration

The learning path generation leverages the RAG (Retrieval-Augmented Generation) system:

1. **Semantic Clustering**: Groups related questions using vector embeddings
2. **Gap Analysis**: Identifies under-covered topics per channel
3. **Intelligent Ordering**: Orders questions from foundational to advanced
4. **Cross-Channel Links**: Finds related questions across different channels

**RAG Service**: `script/ai/services/rag-enhanced-generation.js`

Key functions used:
- `getGenerationContext()`: Get related questions for a topic
- `findCoverageGaps()`: Identify missing topics in a channel
- `findCrossChannelLinks()`: Find related questions across channels

## Job Title Relevance

**Service**: `script/ai/services/job-title-relevance.js`

Calculates relevance scores (0-100) for each question based on:
- Primary channel match (40 points)
- Secondary channel match (20 points)
- Sub-channel/tag match (15 points)
- Keyword match in question/answer (25 points max)

Supported job titles:
- frontend-engineer
- backend-engineer
- fullstack-engineer
- devops-engineer
- sre
- data-engineer
- ml-engineer
- cloud-architect

## Migration

Run the migration to create the table:

```bash
node script/migrations/add-learning-paths-table.js
```

This creates:
- `learning_paths` table
- Indexes on: path_type, difficulty, target_company, target_job_title, status, popularity

## Running the Generator

### Manual Run
```bash
node script/generate-learning-paths.js
```

### Via GitHub Actions
- Automatic: Runs daily at 2 AM UTC
- Manual: Go to Actions → "Generate Learning Paths" → Run workflow

## Future Enhancements

1. **User Progress Tracking**: Track which questions in a path are completed
2. **Custom Paths**: Allow users to create their own learning paths
3. **Path Recommendations**: AI-powered path suggestions based on user history
4. **Collaborative Paths**: Community-curated learning paths
5. **Path Analytics**: Detailed analytics on path effectiveness
6. **Adaptive Ordering**: Reorder questions based on user performance
7. **Certification Paths**: Link paths to certification exams
8. **Path Sharing**: Share paths with others via URL

## Monitoring

Key metrics to track:
- Total paths generated
- Paths by type and difficulty
- Most popular paths (by starts)
- Completion rates
- User ratings
- Search queries (for improving discovery)

## Troubleshooting

### No paths generated
- Check if questions have company tags or job_title_relevance data
- Verify RAG vector DB is initialized
- Check minimum question thresholds (5-10 per path)

### Paths not updating
- Verify GitHub Actions workflow is running
- Check workflow logs for errors
- Ensure database credentials are set in secrets

### Search not working
- Check API endpoint is responding
- Verify search query is being sent correctly
- Check for CORS issues if running locally

## Related Documentation

- [Job Title Personalization](./JOB_TITLE_PERSONALIZATION.md)
- [RAG Enhanced Generation](../script/ai/services/rag-enhanced-generation.js)
- [Database Schema](../shared/schema.ts)
