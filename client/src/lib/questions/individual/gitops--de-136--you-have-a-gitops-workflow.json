{
  "id": "de-136",
  "question": "You have a GitOps workflow where application configs are stored in a separate config repository from the application code. A developer pushes code changes that require updating both the application image tag and adding a new environment variable. Describe the complete GitOps flow from code commit to deployment, including how you handle the dependency between application and config changes.",
  "answer": "Code push triggers CI to build image, update config repo with new tag/env var, ArgoCD detects config changes and deploys to cluster.",
  "explanation": "## GitOps Flow with Separate Config Repository\n\n### 1. Initial Code Push\n- Developer commits application code changes to the **application repository**\n- CI/CD pipeline is triggered (GitHub Actions, Jenkins, etc.)\n\n### 2. Build and Image Management\n- CI builds new container image with updated code\n- Image is tagged (e.g., `v1.2.3` or commit SHA) and pushed to container registry\n- CI runs tests and security scans\n\n### 3. Config Repository Update\n- CI pipeline makes automated commit to **config repository**\n- Updates include:\n  - New image tag in deployment manifests\n  - Addition of new environment variable in ConfigMap/Secret\n- This can be done via:\n  - Direct commit with service account\n  - Pull request for review (recommended)\n\n### 4. GitOps Controller Detection\n- ArgoCD/Flux detects changes in config repository\n- Compares desired state (Git) vs actual state (cluster)\n- Identifies drift and plans synchronization\n\n### 5. Deployment Execution\n- GitOps controller applies changes to Kubernetes cluster\n- Rolling update deploys new image with environment variables\n- Health checks ensure successful deployment\n\n### 6. Monitoring and Rollback\n- Monitor application metrics and logs\n- If issues arise, rollback via Git revert\n- GitOps controller automatically reverts cluster state\n\n### Key Benefits\n- **Separation of concerns**: App code vs infrastructure config\n- **Audit trail**: All changes tracked in Git\n- **Declarative**: Desired state defined in Git\n- **Automated**: Reduces manual deployment errors",
  "diagram": "graph TD\n    A[Developer Commits Code] --> B[CI Pipeline Triggered]\n    B --> C[Build & Test Application]\n    C --> D[Build Container Image]\n    D --> E[Push Image to Registry]\n    E --> F[Update Config Repository]\n    F --> G[Commit New Image Tag + Env Vars]\n    G --> H[ArgoCD Detects Config Changes]\n    H --> I[Compare Desired vs Actual State]\n    I --> J[Apply Changes to Cluster]\n    J --> K[Rolling Update Deployment]\n    K --> L[Health Checks Pass]\n    L --> M[Deployment Complete]\n    \n    N[Config Repository] --> H\n    O[Application Repository] --> A\n    P[Container Registry] --> J\n    \n    style A fill:#e1f5fe\n    style M fill:#c8e6c9\n    style H fill:#fff3e0",
  "difficulty": "intermediate",
  "tags": [
    "gitops",
    "argocd"
  ],
  "lastUpdated": "2025-12-12T09:15:31.620Z"
}