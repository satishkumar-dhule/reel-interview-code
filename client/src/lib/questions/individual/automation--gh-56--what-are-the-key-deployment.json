{
  "id": "gh-56",
  "question": "What are the key deployment strategies in Kubernetes and when should each be used?",
  "answer": "Methods to update applications with minimal downtime: Rolling, Blue-Green, Canary, and Recreate strategies.",
  "explanation": "## Concept Overview\nDeployment strategies control how application updates are rolled out to production, balancing availability, risk, and resource usage.\n\n## Implementation\n\n### Rolling Update (Default)\n```yaml\nspec:\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n```\nGradually replaces old pods with new ones.\n\n### Blue-Green Deployment\n```yaml\n# Deploy new version, then switch service selector\nspec:\n  selector:\n    matchLabels:\n      version: v2  # Switch from v1 to v2\n```\nMaintains two identical environments.\n\n### Canary Deployment\n```yaml\n# Start with 5% traffic to new version\napiVersion: argoproj.io/v1alpha1\nkind: Rollout\nspec:\n  strategy:\n    canary:\n      steps:\n      - setWeight: 5\n      - pause: {duration: 10m}\n```\nRoutes small percentage of traffic to new version.\n\n### Recreate Strategy\n```yaml\nspec:\n  strategy:\n    type: Recreate\n```\nTerminates all old pods before creating new ones.\n\n## Trade-offs\n\n| Strategy | Downtime | Resource Usage | Risk | Complexity |\n|----------|----------|----------------|------|------------|\n| Rolling | None | Medium | Low | Low |\n| Blue-Green | None | High | Very Low | Medium |\n| Canary | None | High | Very Low | High |\n| Recreate | Yes | Low | Medium | Very Low |\n\n## Common Pitfalls\n- **Resource Limits**: Blue-Green doubles resource requirements\n- **Database Migrations**: Must be backward-compatible for canary/rolling\n- **Health Checks**: Missing readiness probes cause failed deployments\n- **Traffic Splitting**: Improper weight distribution in canary deployments\n- **Rollback Plans**: Not testing rollback procedures before production",
  "difficulty": "intermediate",
  "tags": [
    "automation",
    "tools"
  ],
  "lastUpdated": "2025-12-15T06:35:50.414Z",
  "diagram": "flowchart TD\n    A[Deployment Request] --> B{Strategy Selection}\n    \n    B -->|Rolling| C[Create New Pods<br/>maxSurge: 25%]\n    C --> D[Wait for Ready]\n    D --> E[Terminate Old Pods<br/>maxUnavailable: 25%]\n    \n    B -->|Blue-Green| F[Deploy Full New Version]\n    F --> G[Health Check New Version]\n    G --> H[Switch Traffic 100%]\n    H --> I[Terminate Old Version]\n    \n    B -->|Canary| J[Deploy 5% New Version]\n    J --> K[Route 5% Traffic]\n    K --> L{Monitor & Evaluate]\n    L -->|Success| M[Gradually Increase Traffic]\n    L -->|Failure| N[Rollback to 100% Old]\n    \n    B -->|Recreate| O[Terminate All Old Pods]\n    O --> P[Create All New Pods]\n    \n    E --> Q[Deployment Complete]\n    I --> Q\n    M --> Q\n    N --> Q\n    P --> Q"
}